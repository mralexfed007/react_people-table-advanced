(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{30:function(e,a,t){e.exports=t(54)},50:function(e,a,t){},52:function(e,a,t){},54:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(26),s=t.n(c),l=t(5),o=t(1),i=function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(l.c,{className:"navbar-item is-tab",to:"/",activeClassName:"is-active",exact:!0},"Home"),r.a.createElement(l.c,{className:"navbar-item is-tab",to:"/people",activeClassName:"is-active"},"People")))},m=t(14),u=t(9),d=t(28),b=t.n(d),f=t(19),p=t.n(f),h=t(4),E=t(29),v=function(){var e=Object(E.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()}));case 2:return a=e.sent,e.abrupt("return",a.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{mother:a.find((function(a){return a.name===e.motherName}))||null,father:a.find((function(a){return a.name===e.fatherName}))||null})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=t(3),O=t.n(N),j=(O.a.string.isRequired,O.a.string.isRequired,O.a.number.isRequired,O.a.number.isRequired,O.a.string,O.a.string,O.a.string.isRequired,O.a.UserType,O.a.UserType,O.a.string.isRequired,O.a.string.isRequired,O.a.string.isRequired,t(13)),g=t.n(j),y=function(e){var a=e.name,t=e.slug,n=e.sex,c=Object(o.i)().url;return r.a.createElement(l.c,{to:"".concat(c,"/").concat(t),style:"m"===n?{color:"blue"}:{color:"red"},activeClassName:"is-selected"},a)},k=function(e){var a=e.person,t=Object(o.i)("/people/:personId?").params.personId;return r.a.createElement("tr",{className:g()("Person",{"is-selected":t===a.slug})},["name","sex","born","died","mother","father"].map((function(e){var t="".concat(e,"Name");switch(e){case"name":return r.a.createElement("td",{key:e},r.a.createElement(y,a));case"mother":case"father":return r.a.createElement("td",{key:e},a[e]?r.a.createElement(y,a[e]):a[t]);default:return r.a.createElement("td",{key:e},a[e])}})))},C=(t(50),function(e){var a=e.people,t=e.onSort,c=Object(o.h)(),s=new URLSearchParams(c.search),l=s.get("sortBy")||"",i=s.get("sortOrder")||"",m=Object(n.useState)(!1),d=Object(u.a)(m,2),b=d[0],f=d[1],p=Object(n.useCallback)((function(e,a){return!1===b?(f(!b),"asc"):e!==a?"asc":(f(!b),"desc")}),[b]);return r.a.createElement("table",{className:"table is-striped is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,["Name","Sex","Born","Died","Mother","Father"].map((function(e){return r.a.createElement("th",{key:e},r.a.createElement("button",{type:"button",onClick:function(){return t((function(a){return{sortBy:e,sortOrder:p(a.sortBy,e)}}))},className:"button is-normal",disabled:"MotherFather".includes(e)},r.a.createElement("span",null,e),!"MotherFather".includes(e)&&r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sort"}))))})))),r.a.createElement("tbody",null,function(e,a,t){switch(a){case"Name":return"desc"===t?e.sort((function(e,a){return a.name.localeCompare(e.name)})):e.sort((function(e,a){return e.name.localeCompare(a.name)}));case"Sex":return"desc"===t?e.sort((function(e,a){return a.sex.localeCompare(e.sex)})):e.sort((function(e,a){return e.sex.localeCompare(a.sex)}));case"Born":return"desc"===t?e.sort((function(e,a){return a.born-e.born})):e.sort((function(e,a){return e.born-a.born}));case"Died":return"desc"===t?e.sort((function(e,a){return a.died-e.died})):e.sort((function(e,a){return e.died-a.died}));default:return e}}(a,l,i).map((function(e){return r.a.createElement(k,{key:e.slug,person:e})}))))}),x=t(10),S=function(e){var a=e.people,t=e.setPeople,c=Object(n.useState)({name:"",sex:"",born:"",died:"",mother:{},father:{},motherName:"",fatherName:""}),s=Object(u.a)(c,2),l=s[0],i=s[1],d=Object(n.useState)({mothersArr:[],fathersArr:[]}),b=Object(u.a)(d,2),f=b[0],p=b[1],E=Object(o.g)(),v=Object(n.useCallback)((function(e){return a.filter((function(a){return a.sex===e}))}),[a]),N=Object(n.useCallback)((function(e){p({mothersArr:v("f").filter((function(a){return e>a.born})).map((function(e){return e.name})),fathersArr:v("m").filter((function(a){return e>a.born})).map((function(e){return e.name}))})}),[v]),O=Object(n.useState)({lifeDuration:!0,actualBirthday:!0,buttonDisable:!1}),j=Object(u.a)(O,2),y=j[0],k=j[1],C=Object(n.useCallback)((function(e){var a=e.born,t=e.died-a,n=t>=0&&t<150,r=a>=1400&&a<=2021||""===a;k({lifeDuration:n,actualBirthday:r,buttonDisable:n&&r&&""!==a})}),[]),S=Object(n.useCallback)((function(e,a){return[e.split(" "),a].join("-")}),[]),q=Object(n.useCallback)((function(e){e.preventDefault();var a=l.name,n=l.born;t((function(e){return[].concat(Object(m.a)(e),[Object(h.a)(Object(h.a)({},l),{},{slug:S(a,n)})])})),E.push("/people")}),[l]);Object(n.useEffect)((function(){N(l.born),C(l)}),[l]);var w=Object(n.useCallback)((function(e){var t=e.target,n=t.value,r=t.name;switch(r){case"mother":case"father":i((function(e){var t;return Object(h.a)(Object(h.a)({},e),{},(t={},Object(x.a)(t,r,a.find((function(e){return e.name===n}))),Object(x.a)(t,"".concat(r,"Name"),a.find((function(e){return e.name===n})).name||null),t))}));break;case"name":i((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(x.a)({},r,/^[a-z \s]+$/i.test(n)||""===n?n:e[r]))}));break;case"born":case"died":i((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(x.a)({},r,+n))}));break;default:i((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(x.a)({},r,n))}))}}),[a]);return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("form",{type:"submit",onSubmit:q},r.a.createElement("div",{className:"field has-addons has-addons-centered"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{value:l.mother.name,name:"mother",onChange:w,disabled:!l.born},r.a.createElement("option",{value:""},"Mother"),f.mothersArr.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-venus"}))),r.a.createElement("div",{className:"control has-icons-left is-expanded"},r.a.createElement("input",{className:"input",type:"text",placeholder:"User name",name:"name",value:l.name,onChange:w,required:!0}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-user"}))),r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{value:l.father.name,name:"father",onChange:w,disabled:!l.born},r.a.createElement("option",{value:""},"Father"),f.fathersArr.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-mars"})))),r.a.createElement("div",{className:"field has-addons has-addons-centered"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"sex",value:"m",checked:"m"===l.sex,onChange:w,required:!0}),"Male"),r.a.createElement("label",{className:"radio"},r.a.createElement("input",{type:"radio",name:"sex",value:"f",checked:"f"===l.sex,onChange:w,required:!0}),"Female"))),r.a.createElement("div",{className:"block"},r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control is-expanded has-icons-left"},r.a.createElement("input",{className:g()("input",{"is-danger":!y.actualBirthday}),type:"text",placeholder:"Born",name:"born",value:l.born,onChange:w,required:!0}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-baby"})),!y.actualBirthday&&r.a.createElement("p",{className:"help is-danger"},"Enter the actual birthday, please"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control is-expanded has-icons-left"},r.a.createElement("input",{className:g()("input",{"is-danger":!y.lifeDuration}),type:"text",placeholder:"Died",name:"died",value:l.died,onChange:w,disabled:!l.born,required:!0}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-skull-crossbones"})),!y.lifeDuration&&r.a.createElement("p",{className:"help is-danger"},"Life duration should be >= 0 and < 150"))))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-primary",type:"submit",disabled:!y.buttonDisable},"Add")))))},q=function(){var e=Object(n.useState)([]),a=Object(u.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)([]),i=Object(u.a)(s,2),d=i[0],f=i[1];Object(n.useEffect)((function(){v().then(c)}),[]);var p=Object(o.i)().path,h=Object(o.h)(),E=Object(o.g)(),N=new URLSearchParams(h.search),O=N.get("query")||"",j=Object(n.useState)({sortBy:"",sortOrder:""}),g=Object(u.a)(j,2),y=g[0],k=g[1],x=Object(n.useState)(O),q=Object(u.a)(x,2),w=q[0],B=q[1],D=Object(n.useCallback)((function(e,a){a?N.set(e,a):N.delete(e)}),[N]),R=Object(n.useCallback)(b()((function(e){D("query",e),E.push("?".concat(N.toString()))}),500),[D]);Object(n.useEffect)((function(){D("sortBy",y.sortBy),D("sortOrder",y.sortOrder),E.push("?".concat(N.toString()))}),[y]);var A=Object(n.useMemo)((function(){return function(e,a){return e.filter((function(e){var t=e.name,n=e.motherName,r=e.fatherName;return"".concat(t).concat(n).concat(r).toLowerCase().includes(a.toLowerCase())}))}([].concat(Object(m.a)(t),Object(m.a)(d)),O)}),[t,O,d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"subtitle"},"People page"),r.a.createElement("div",{className:"block"},r.a.createElement("div",{className:"control has-icons-right"},r.a.createElement("input",{className:"input",type:"text",value:w,onChange:function(e){var a=e.target;B(a.value),R(a.value)},placeholder:"Enter name for filter"}),r.a.createElement("span",{className:"icon is-small is-right"},r.a.createElement("i",{className:"fas fa-search"})))),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"".concat(p,"/new")},r.a.createElement(S,{people:t,setPeople:f})),r.a.createElement(o.b,null,r.a.createElement(l.b,{className:"button is-primary",to:{pathname:"".concat(p,"/new"),search:h.search}},"Add Person"))),r.a.createElement(C,{people:A,onSort:k}))},w=function(){return r.a.createElement("h2",{className:"subtitle"},"Home page")},B=(t(51),t(52),t(53),function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i,null),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/people"},r.a.createElement(q,null)),r.a.createElement(o.b,{path:"/",exact:!0},r.a.createElement(w,null)),r.a.createElement(o.a,{path:"/home",to:"/"}),r.a.createElement("p",null,"Not found Page")))))))});s.a.render(r.a.createElement(l.a,null,r.a.createElement(B,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.4316f0e9.chunk.js.map